# ============================================================
# Development Configuration
# Use: docker-compose -f docker-compose.yml -f docker-compose.dev.yml up
# ============================================================

services:
  videoteaching:
    # Override build for development
    build:
      context: .
      dockerfile: Dockerfile
      target: dependencies # Stop at dependencies stage for faster rebuilds

    # Development environment
    environment:
      - FLASK_ENV=development
      - FLASK_DEBUG=1

    # Live code reload
    volumes:
      # Override read-only mounts with read-write for development
      - ./app:/app/app:rw
      - ./templates:/app/templates:rw
      - ./static:/app/static:rw
      - ./config.py:/app/config.py:rw
      - ./run.py:/app/run.py:rw

    # Override command for development with auto-reload
    command: python run.py

    # Remove restart policy for development
    restart: "no"

    # Enable interactive terminal
    stdin_open: true
    tty: true
